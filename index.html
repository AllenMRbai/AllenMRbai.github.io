<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">








<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
<meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Allen&#39;s Notes">
<meta property="og:url" content="https://allenmrbai.github.io/index.html">
<meta property="og:site_name" content="Allen&#39;s Notes">
<meta property="og:description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Allen&#39;s Notes">
<meta name="twitter:description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">






  <link rel="canonical" href="https://allenmrbai.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Allen's Notes</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Allen's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Quik notes</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2025/04/24/pnpm-env-use/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2025/04/24/pnpm-env-use/" class="post-title-link" itemprop="url">ä½¿ç”¨ pnpm æ›¿ä»£ nvm è¿›è¡Œ Node ç‰ˆæœ¬ç®¡ç†</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2025-04-24 19:20:05 / æ›´æ–°äºï¼š20:12:36" itemprop="dateCreated datePublished" datetime="2025-04-24T19:20:05+08:00">2025-04-24</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬ã€‚pnpm æä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å‘½ä»¤ <code>pnpm env use &lt;node-version&gt;</code> æ¥åˆ‡æ¢ Node.js ç‰ˆæœ¬ã€‚å¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾åœ°åœ¨ä¸åŒçš„é¡¹ç›®ä¸­åˆ‡æ¢ Node.js ç‰ˆæœ¬ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦å•ç‹¬ä¸‹è½½ nvm äº†ã€‚</p>
<h2 id="å®‰è£…-pnpm"><a href="#å®‰è£…-pnpm" class="headerlink" title="å®‰è£… pnpm"></a>å®‰è£… pnpm</h2><p>æœ‰ä¸ªæ³¨æ„äº‹é¡¹ï¼Œä½ é€šè¿‡ <code>npm i -g pnpm</code> çš„å½¢å¼å®‰è£…æ˜¯æ²¡æœ‰ <code>pnpm env use</code> å‘½ä»¤çš„ã€‚éœ€è¦é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å®‰è£…æ‰è¡Œï¼ˆå¦‚æœä½ å·²ç»å®‰è£…äº† nvmï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª<a href="https://github.com/nvm-sh/nvm/issues/298" target="_blank" rel="noopener">é“¾æ¥</a>åˆ é™¤ nvmï¼Œç„¶åå†å®‰è£… pnpmï¼‰ï¼š</p>
<h3 id="åœ¨-Windows-ä¸Šå®‰è£…-pnpm"><a href="#åœ¨-Windows-ä¸Šå®‰è£…-pnpm" class="headerlink" title="åœ¨ Windows ä¸Šå®‰è£… pnpm"></a>åœ¨ Windows ä¸Šå®‰è£… pnpm</h3><p>ä½¿ç”¨ PowerShellï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke-WebRequest https://get.pnpm.io/install.ps1 -UseBasicParsing | Invoke-Expression</span><br></pre></td></tr></table></figure>
<p><a href="https://www.pnpm.cn/installation#%E5%9C%A8-windows-%E4%B8%8A" target="_blank" rel="noopener">åŸå®˜ç½‘æ–‡æ¡£åœ°å€</a></p>
<h3 id="åœ¨-POSIX-ç³»ç»Ÿä¸Š"><a href="#åœ¨-POSIX-ç³»ç»Ÿä¸Š" class="headerlink" title="åœ¨ POSIX ç³»ç»Ÿä¸Š"></a>åœ¨ POSIX ç³»ç»Ÿä¸Š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.pnpm.io/install.sh | sh -</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ²¡æœ‰å®‰è£… curlï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ wgetï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://get.pnpm.io/install.sh | sh -</span><br></pre></td></tr></table></figure>
<p><a href="https://www.pnpm.cn/installation#%E5%9C%A8-posix-%E7%B3%BB%E7%BB%9F%E4%B8%8A" target="_blank" rel="noopener">åŸå®˜ç½‘æ–‡æ¡£åœ°å€</a></p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å®‰è£…å®Œæ¯•éœ€è¦é‡å¯ä¸‹å‘½ä»¤è¡Œå·¥å…·ï¼ˆæˆ–è€…ç”¨ <code>source ~/.bashrc</code> or <code>source ~/.zshrc</code> or <code>source ~/.bash_profile</code> ç­‰å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆï¼‰ï¼Œç„¶åæ‰§è¡Œ <code>pnpm -v</code> å°±å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·äº†ã€‚</p>
<p>å¦‚æœä½ è¦åˆ‡æ¢ node åˆ°ç‰ˆæœ¬ 22 å¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pnpm env use --global 22</span><br><span class="line"></span><br><span class="line">node -v # v22.15.0</span><br></pre></td></tr></table></figure>
<p>åˆ‡æ¢ node åˆ°ç‰ˆæœ¬ 16 å¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pnpm env use --global 16</span><br><span class="line"></span><br><span class="line">node -v # v16.20.2</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œå¦‚æœæŸä¸ªé¡¹ç›®å®‰è£…å‘½ä»¤éœ€è¦ pnpm ç‰ˆæœ¬ä¸º 8ï¼Œnode ç‰ˆæœ¬ä¸º 16ï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pnpm env use --global 16</span><br><span class="line"></span><br><span class="line">npx pnpm@8 install</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/vue-slots-and-scopedslots/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/vue-slots-and-scopedslots/" class="post-title-link" itemprop="url">vm.$slotså’Œvm.$scopedSlots åœ¨æ¸²æŸ“å‡½æ•°å†…çš„ä½¿ç”¨</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:50:21" itemprop="dateCreated datePublished" datetime="2019-02-28T15:50:21+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä»¥ä¸‹ä¾‹å­æ˜¯åœ¨ <a href="mailto:Vue@2.6.2" target="_blank" rel="noopener">Vue@2.6.2</a> ä¸­è¿è¡Œçš„ã€‚</p>
<p><code>vm.$slots</code> ä¸ <code>vm.$scopedSlots</code> æ˜¯ä¸¤ä¸ªä¸æ’æ§½ç›¸å…³çš„å±æ€§ã€‚åœ¨ä½¿ç”¨æ¸²æŸ“å‡½æ•°æ›¿ä»£ vue çš„æ¨¡æ¿åŠŸèƒ½æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨åˆ°è¿™ä¸¤ä¸ªå±æ€§æ¥å®ç°æ’æ§½çš„åŠŸèƒ½ã€‚</p>
<p>ä¸‹é¢åˆ©ç”¨ä¸€ä¸ªä¾‹å­æ¥ç ”ç©¶ <code>vm.$slots</code> <code>vm.$scopedSlots</code> çš„åŒºåˆ«ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">HelloWorld</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">slot</span>=<span class="string">"head"</span> <span class="attr">slot-scope</span>=<span class="string">"&#123;author&#125;"</span>&gt;</span>this is head slot -- &#123;&#123;author&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>this is default slot<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"foot"</span>&gt;</span>this is foot slot<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åé¢ä»£ç  ç•¥ --&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HelloWorld.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"head"</span> <span class="attr">author</span>=<span class="string">"Allen"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"aside"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"foot"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åé¢ä»£ç  ç•¥ --&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ <code>HelloWorld.vue</code> å†…å®šä¹‰ä¸‰ä¸ªå…·åæ’æ§½å’Œä¸€ä¸ªé»˜è®¤æ’æ§½ã€‚åœ¨ <code>App.vue</code> å†…å®ä¾‹åŒ– HelloWorld ç»„ä»¶æ—¶ï¼Œåªä½¿ç”¨äº† <code>head</code> <code>default</code> <code>foot</code> æ’æ§½ï¼Œå…¶ä¸­ <code>head</code> æ’æ§½æ˜¯ä¸€ä¸ªä½œç”¨åŸŸæ’æ§½ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°† <code>vm.$slots</code> <code>vm.$scopedSlots</code>æ‰“å°çš„åˆ°æ§åˆ¶å°ä¸Šï¼Œchrome æµè§ˆå™¨ä¸Šæ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<h4 id="vm-slots"><a href="#vm-slots" class="headerlink" title="vm.\$slots"></a>vm.\$slots</h4><p><img src="https://note.youdao.com/yws/res/4098/EB147A0005BE49C4BE7E572B7767079F" alt="vm.$slots"></p>
<p>è§‚å¯Ÿå‘ç°</p>
<ul>
<li>åªæœ‰è¢«ä½¿ç”¨åˆ°çš„æ’æ§½æ‰ä¼šå‡ºç°åœ¨ <code>vm.$slots</code> å†…ã€‚</li>
<li>é»˜è®¤æ’æ§½å’Œå…·åæ’æ§½çš„å€¼æ˜¯è™šæ‹Ÿ dom æ•°ç»„ï¼ˆ<code>VNode[]</code>ï¼‰,ä½œç”¨åŸŸæ’æ§½å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ª <code>get</code> æ–¹æ³•ä¸”å±æ€§ä¿®é¥°ä¸ºä¸å¯æšä¸¾ã€‚</li>
</ul>
<h4 id="vm-scopedSlots"><a href="#vm-scopedSlots" class="headerlink" title="vm.\$scopedSlots"></a>vm.\$scopedSlots</h4><p><img src="https://note.youdao.com/yws/res/4100/F15683549E22485EBEED1246DCB44F0E" alt="vm.$scopedSlots"></p>
<p>è§‚å¯Ÿå‘ç°</p>
<ul>
<li>åªæœ‰è¢«ä½¿ç”¨åˆ°çš„æ’æ§½æ‰ä¼šå‡ºç°åœ¨ <code>vm.$scopedSlots</code> å†…ã€‚</li>
<li>è¿™é‡Œé¢å¤šäº† <code>$stable</code> <code>_normalized</code> å±æ€§ã€‚å…·ä½“ä»€ä¹ˆä½œç”¨ï¼ŒæœªçŸ¥ã€‚</li>
<li>æ— è®ºæ˜¯å…·åæ’æ§½ã€é»˜è®¤æ’æ§½ã€ä½œç”¨åŸŸæ’æ§½éƒ½åœ¨ï¼Œè€Œä¸”å€¼æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œè°ƒç”¨åä¼šè¿”å›è™šæ‹Ÿ dom æ•°ç»„ï¼ˆ<code>VNode[]</code>ï¼‰ã€‚</li>
<li>ä½œç”¨åŸŸæ’æ§½å¯¹åº”çš„å‡½æ•°å†…å¤šä¸ªå‚æ•° <code>scope</code>ï¼Œå¯ä»¥é€šè¿‡å®ƒå°†å‚æ•°ä¼ ç»™æ’æ§½ã€‚</li>
<li>æ‰€æœ‰å€¼éƒ½æ˜¯å¯æšä¸¾çš„ã€‚</li>
</ul>
<h2 id="vm-slots-åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨"><a href="#vm-slots-åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨" class="headerlink" title="vm.\$slots åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨"></a>vm.\$slots åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨</h2><p>ä»¥ä¸‹ä¾‹å­æ¥è‡ª Vue å®˜æ–¹æ–‡æ¡£ï¼Œä»…åšäº†äº›è®¸çš„æ”¹åŠ¨ã€‚</p>
<h3 id="ç®€å•çš„ä¾‹å­"><a href="#ç®€å•çš„ä¾‹å­" class="headerlink" title="ç®€å•çš„ä¾‹å­"></a>ç®€å•çš„ä¾‹å­</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MyHeadline.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"MyHeadline"</span>,</span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="undefined">      level: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">        required: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    render(createElement) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> createElement(<span class="string">"h"</span> + <span class="keyword">this</span>.level, <span class="keyword">this</span>.$slots.default);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"1"</span>&gt;</span>è¿™æ˜¯level 1<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"2"</span>&gt;</span>è¿™æ˜¯level 2<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"3"</span>&gt;</span>è¿™æ˜¯level 3<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"4"</span>&gt;</span>è¿™æ˜¯level 4<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"5"</span>&gt;</span>è¿™æ˜¯level 5<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyHeadline</span> <span class="attr">:level</span>=<span class="string">"6"</span>&gt;</span>è¿™æ˜¯level 6<span class="tag">&lt;/<span class="name">MyHeadline</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åé¢ä»£ç  ç•¥ --&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢æ¸²æŸ“çš„ç»“æœï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4101/0E93C9D17EF543CAAD51705E67B781ED" alt="æ¸²æŸ“ç»“æœ"></p>
<p>é¡µé¢çš„ html ç»“æ„ï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4099/CCAF184EDE8348D7A9047FED4DE328E1" alt="htmlç»“æ„"></p>
<p><code>MyHeadline</code> ç»„ä»¶çš„ç›®çš„å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯æ ¹æ®ä¼ å…¥çš„ <code>level</code> å±æ€§ç”Ÿæˆå¯¹åº”çº§åˆ«çš„ h æ ‡ç­¾ã€‚ä½¿ç”¨ vue çš„æ¨¡æ¿æ˜¯å¾ˆéš¾å®ç°è¿™æ ·çš„åŠŸèƒ½çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨åˆ°äº† vue çš„æ¸²æŸ“å‡½æ•°ï¼ˆå…¶å® vue æ¨¡æ¿æœ€ç»ˆä¹Ÿæ˜¯ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°ï¼‰ã€‚</p>
<h3 id="è¿›é˜¶ä¾‹å­"><a href="#è¿›é˜¶ä¾‹å­" class="headerlink" title="è¿›é˜¶ä¾‹å­"></a>è¿›é˜¶ä¾‹å­</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- AnchoredHeading.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> getChildrenTextContent = <span class="function"><span class="keyword">function</span>(<span class="params">children</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> children</span></span><br><span class="line"><span class="javascript">      .map(<span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> node.children</span></span><br><span class="line"><span class="undefined">          ? getChildrenTextContent(node.children)</span></span><br><span class="line"><span class="undefined">          : node.text;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="javascript">      .join(<span class="string">""</span>);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"AnchoredHeading"</span>,</span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="undefined">      level: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">        required: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    render(createElement) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// åˆ›å»º kebab-case é£æ ¼çš„ID</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> headingId = getChildrenTextContent(<span class="keyword">this</span>.$slots.default)</span></span><br><span class="line"><span class="undefined">        .toLowerCase()</span></span><br><span class="line"><span class="javascript">        .replace(<span class="regexp">/\W+/g</span>, <span class="string">"-"</span>)</span></span><br><span class="line"><span class="javascript">        .replace(<span class="regexp">/(^\-|\-$)/g</span>, <span class="string">""</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> createElement(<span class="string">"h"</span> + <span class="keyword">this</span>.level, [</span></span><br><span class="line"><span class="undefined">        createElement(</span></span><br><span class="line"><span class="javascript">          <span class="string">"a"</span>,</span></span><br><span class="line"><span class="undefined">          &#123;</span></span><br><span class="line"><span class="undefined">            attrs: &#123;</span></span><br><span class="line"><span class="undefined">              name: headingId,</span></span><br><span class="line"><span class="javascript">              href: <span class="string">"#"</span> + headingId</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.$slots.default</span></span><br><span class="line"><span class="undefined">        )</span></span><br><span class="line"><span class="undefined">      ]);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"1"</span>&gt;</span>chapter 1 love<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"2"</span>&gt;</span>chapter 2 marry<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"3"</span>&gt;</span>chapter 3 rival<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"4"</span>&gt;</span>chapter 4 hate<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"5"</span>&gt;</span>chapter 5 divorce<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AnchoredHeading</span> <span class="attr">:level</span>=<span class="string">"6"</span>&gt;</span>chapter 6 çœŸé¦™<span class="tag">&lt;/<span class="name">AnchoredHeading</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åé¢ä»£ç  ç•¥ --&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢æ¸²æŸ“ç»“æœï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4137/D580782D95F743839C502CDDFFC17897" alt="æ¸²æŸ“ç»“æœ2"></p>
<p>é¡µé¢ html ç»“æ„ï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4136/19E72031A54E4B6DAD7A7B8B21D9C002" alt="htmlç»“æ„2"></p>
<h2 id="vm-scopedSlots-åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨"><a href="#vm-scopedSlots-åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨" class="headerlink" title="vm.\$scopedSlots åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨"></a>vm.\$scopedSlots åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨</h2><h3 id="ç®€å•ä¾‹å­"><a href="#ç®€å•ä¾‹å­" class="headerlink" title="ç®€å•ä¾‹å­"></a>ç®€å•ä¾‹å­</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Menu.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"Menu"</span>,</span></span><br><span class="line"><span class="undefined">    render(createElement) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> createElement(</span></span><br><span class="line"><span class="javascript">        <span class="string">"div"</span>,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">class</span>: <span class="string">"menuBox"</span> &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$scopedSlots.default(&#123; <span class="attr">title</span>: <span class="string">"ğŸŒ èœå•æ ç›® ğŸŒ"</span> &#125;)</span></span><br><span class="line"><span class="undefined">      );</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MenuItem.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"MenuItem"</span>,</span></span><br><span class="line"><span class="undefined">    render(createElement) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> createElement(<span class="string">"div"</span>, &#123; <span class="attr">class</span>: <span class="string">"MenuItem"</span> &#125;, <span class="keyword">this</span>.$slots.default);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"&#123;title&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menuitem</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">menuitem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menuitem</span>&gt;</span>äº§å“<span class="tag">&lt;/<span class="name">menuitem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menuitem</span>&gt;</span>å…¬å¸ç®€ä»‹<span class="tag">&lt;/<span class="name">menuitem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menuitem</span>&gt;</span>è”ç³»æˆ‘ä»¬<span class="tag">&lt;/<span class="name">menuitem</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åé¢ä»£ç  ç•¥ --&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨<code>Menu.vue</code>å†…æˆ‘ä»¬é€šè¿‡<code>this.$scopedSlots.default({ title: &quot;ğŸŒ èœå•æ ç›® ğŸŒ&quot; })</code>å‘ä½œç”¨åŸŸæ’æ§½ä¼ äº†å‚æ•°ï¼ˆ<code>{ title: &quot;ğŸŒ èœå•æ ç›® ğŸŒ&quot; }</code>ï¼‰ã€‚ç„¶åæˆ‘ä»¬åœ¨ <code>App.vue</code> å†…ä½¿ç”¨ <code>&lt;template slot-scope=&quot;{title}&quot;&gt;</code> è·å¾—ä¼ è¿‡æ¥çš„å‚æ•°ï¼ˆè¿™é‡Œç”¨äº†è§£æ„èµ‹å€¼ï¼‰ã€‚</p>
<p>ä¸Šé¢åªæ˜¯ä¸ºäº†å±•ç¤º<code>vm.$scopedSlots</code>åœ¨æ¸²æŸ“å‡½æ•°å†…çš„ä½¿ç”¨ï¼Œè¿™ä¸ªä¾‹å­å†…çš„è¡Œä¸ºæœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾ã€‚</p>
<p>é¡µé¢æ¸²æŸ“ç»“æœï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4468/WEBRESOURCE882982210635beeed57bdfff7154dfb8" alt="scopedslotsæ¸²æŸ“ç»“æœ.png"></p>
<p>é¡µé¢ html ç»“æ„ï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4470/WEBRESOURCE178ed95b3ed30d5d2c691c508c683530" alt="scopedslots_htmlç»“æ„.png"></p>
<h3 id="åœ¨æ¸²æŸ“å‡½æ•°å†…æ’å…¥ä½œç”¨åŸŸæ’æ§½"><a href="#åœ¨æ¸²æŸ“å‡½æ•°å†…æ’å…¥ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="åœ¨æ¸²æŸ“å‡½æ•°å†…æ’å…¥ä½œç”¨åŸŸæ’æ§½"></a>åœ¨æ¸²æŸ“å‡½æ•°å†…æ’å…¥ä½œç”¨åŸŸæ’æ§½</h3><p>å¦‚æœæˆ‘ä»¬æŠŠä¸Šé¢é‚£ä¸ªä¾‹å­é‡Œ<code>App.vue</code>çš„æ¨¡æ¿å†™æ³•æ”¹æˆæ¸²æŸ“å‡½æ•°çš„è¯ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ’å…¥ä½œç”¨åŸŸæ’æ§½å‘¢ï¼Ÿ</p>
<p>åœ¨æ¨¡æ¿å†™æ³•å†…æ’å…¥æ’æ§½å¾ˆç®€å•ï¼Œåªè¦åœ¨ç»„ä»¶æ ‡ç­¾å†…æ’å…¥å³å¯ã€‚åœ¨æ¸²æŸ“å‡½æ•°å†…éœ€è¦ç”¨åˆ°<code>createElement</code>æ–¹æ³•å†…çš„<code>scopedSlots</code>é€‰é¡¹ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Menu <span class="keyword">from</span> <span class="string">"./components/Menu.vue"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> MenuItem <span class="keyword">from</span> <span class="string">"./components/MenuItem.vue"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"app"</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      Menu,</span></span><br><span class="line"><span class="undefined">      MenuItem</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    render(createElement) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> createElement(<span class="string">"div"</span>, &#123; <span class="attr">attrs</span>: &#123; <span class="attr">id</span>: <span class="string">"app"</span> &#125; &#125;, [</span></span><br><span class="line"><span class="javascript">        createElement(<span class="string">"Menu"</span>, &#123;</span></span><br><span class="line"><span class="undefined">          scopedSlots: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="function">(<span class="params">&#123; title &#125;</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">return</span> [</span></span><br><span class="line"><span class="javascript">                createElement(<span class="string">"h4"</span>, title),</span></span><br><span class="line"><span class="javascript">                createElement(<span class="string">"MenuItem"</span>, <span class="string">"é¦–é¡µ"</span>),</span></span><br><span class="line"><span class="javascript">                createElement(<span class="string">"MenuItem"</span>, <span class="string">"äº§å“"</span>),</span></span><br><span class="line"><span class="javascript">                createElement(<span class="string">"MenuItem"</span>, <span class="string">"å…¬å¸ç®€ä»‹"</span>),</span></span><br><span class="line"><span class="javascript">                createElement(<span class="string">"MenuItem"</span>, <span class="string">"è”ç³»æˆ‘ä»¬"</span>)</span></span><br><span class="line"><span class="undefined">              ];</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">      ]);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå†™æ³•å’Œä¸Šé¢çš„æ¨¡æ¿å†™æ³•çš„æ•ˆæœæ˜¯ç­‰åŒçš„ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/defineProperty/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/defineProperty/" class="post-title-link" itemprop="url">Object.defineProperty</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:49:00" itemprop="dateCreated datePublished" datetime="2019-02-28T15:49:00+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>Object.defineProperty</code> å¯ä»¥ç»™å¯¹è±¡å®šä¹‰å±æ€§,ä»¥åŠå±æ€§çš„æè¿°ã€‚</p>
<h2 id="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#åŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a>åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">"Allen"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å±æ€§ 'gender'</span></span><br><span class="line"><span class="comment">// å¯é…ç½®(configurable)</span></span><br><span class="line"><span class="comment">// å¯æšä¸¾(enumerable)</span></span><br><span class="line"><span class="comment">// å¯å†™(writable)</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"gender"</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">true</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  writable: <span class="literal">true</span>,</span><br><span class="line">  value: <span class="string">"man"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰'_birthday'</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¸Œæœ›ç”Ÿæ—¥æ˜¯ä¸å¯æ”¹å†™çš„ï¼Œ</span></span><br><span class="line"><span class="comment">// ä¹Ÿä¸å¸Œæœ›æšä¸¾å¯¹è±¡çš„æ—¶å€™å‡ºç°å®ƒ</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"_birthday"</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">false</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span>,</span><br><span class="line">  writable: <span class="literal">false</span>,</span><br><span class="line">  value: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2000-03-03"</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰'age'</span></span><br><span class="line"><span class="comment">// å¹´é¾„æ˜¯é€šè¿‡ç”Ÿæ—¥è·å¾—çš„ï¼Œå¹¶ä¸”ä¸å¯æ”¹ï¼Œ</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥åªéœ€è¦è®¾ç½®getæ–¹æ³•</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"age"</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">false</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  <span class="keyword">get</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="keyword">this</span>._birthday.getFullYear();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>configurable</code> è®¾ç½®å±æ€§æè¿°æ˜¯å¦å¯ä¿®æ”¹ã€‚å¦‚æœä¸º false,å°†æ— æ³•å¯¹ <code>configurable</code> <code>enumerable</code> <code>writable</code> çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚æœ‰ä¸€ç‚¹ä¾‹å¤–ï¼š å½“ <code>writable</code> ä¸º true æ—¶ï¼Œå¯ä»¥å°†å…¶æ”¹ä¸º falseã€‚</li>
<li><code>enumerable</code> è®¾ç½®å±æ€§æ˜¯å¦ä¼šåœ¨æšä¸¾çš„è¿‡ç¨‹ä¸­å‡ºç°ã€‚<code>for..in</code> <code>Object.keys</code> <code>Object.values</code> <code>Object.entries</code> åªä¼šæšä¸¾å±æ€§æè¿° <code>enumerable</code> ä¸º true çš„å±æ€§ã€‚å…¶ä¸­ <code>for..in</code> ä¼šå°†åŸå‹é“¾ä¸Šæ‰€æœ‰å¯æšä¸¾å±æ€§éƒ½éå†ä¸€éã€‚</li>
<li><code>writable</code> è®¾ç½®å±æ€§æ˜¯å¦å¯å†™ã€‚ä»¥ä¸Šé¢çš„ <code>person</code> å¯¹è±¡ä¸ºä¾‹ï¼Œå…¶ä¸­çš„ <code>_birthday</code> å±æ€§æ˜¯ä¸å¯å†™çš„ï¼Œå‡å¦‚ä½ å¯¹å®ƒèµ‹å€¼ï¼ˆ<code>person._birthday = new Date(&#39;2019-03-03&#39;)</code>ï¼‰ä¼šæ²¡æœ‰æ•ˆæœï¼Œå¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è¿˜ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><code>value</code> è®¾ç½®å±æ€§çš„å€¼ã€‚</li>
<li><code>get</code> è¯»å–å±æ€§çš„å€¼ã€‚ä»¥ä¸Šé¢ <code>person</code> å¯¹è±¡ä¸ºä¾‹ï¼Œå½“ä½¿ç”¨è€…è¦è·å– <code>age</code> çš„å€¼æ—¶ï¼ˆ<code>person.age</code>ï¼‰ï¼Œè·å–çš„å€¼å°±æ˜¯ <code>get</code> æ–¹æ³•è¿”å›çš„å€¼ã€‚</li>
<li><code>set</code> å†™å…¥å±æ€§çš„å€¼ã€‚å¦‚æœåªæœ‰ <code>get</code> æ²¡æœ‰ <code>set</code> é‚£ä¹ˆè¿™ä¸ªå±æ€§æ˜¯ä¸å¯å†™çš„ã€‚</li>
</ul>
<p>æ³¨æ„ <code>writable</code> <code>value</code>æ˜¯ä¸€å¯¹ï¼Œ<code>get</code>æ–¹æ³• <code>set</code>æ–¹æ³•æ˜¯ä¸€å¯¹ã€‚æœ‰ <code>value</code> å°±æ²¡æœ‰ <code>get</code> <code>set</code>ã€‚</p>
<h2 id="è·å–ä¸€ä¸ªå±æ€§çš„æè¿°"><a href="#è·å–ä¸€ä¸ªå±æ€§çš„æè¿°" class="headerlink" title="è·å–ä¸€ä¸ªå±æ€§çš„æè¿°"></a>è·å–ä¸€ä¸ªå±æ€§çš„æè¿°</h2><p>å¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“ä¸€ä¸ªå±æ€§æè¿°å¯ä»¥ä½¿ç”¨ <code>Object.getOwnPropertyDescriptor</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">"age"</span>);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/yield-delegation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/yield-delegation/" class="post-title-link" itemprop="url">yield-delegation</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:47:39" itemprop="dateCreated datePublished" datetime="2019-02-28T15:47:39+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨ generator å‡½æ•°å†…éƒ¨ï¼Œé€šè¿‡<code>yield*</code>è¯­å¥ï¼Œå¯ä»¥å°†<code>yield</code>å§”æ‰˜ç»™å…¶ä»–ä»»ä½•å®ç°<code>iterable</code>çš„å¯¹è±¡ã€‚</p>
<h3 id="å§”æ‰˜ç»™-generator-å‡½æ•°ç”Ÿæˆçš„iterableå¯¹è±¡"><a href="#å§”æ‰˜ç»™-generator-å‡½æ•°ç”Ÿæˆçš„iterableå¯¹è±¡" class="headerlink" title="å§”æ‰˜ç»™ generator å‡½æ•°ç”Ÿæˆçš„iterableå¯¹è±¡"></a>å§”æ‰˜ç»™ generator å‡½æ•°ç”Ÿæˆçš„<code>iterable</code>å¯¹è±¡</h3><p>è°ƒç”¨ generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå®ç°<code>iterable</code>çš„å¯¹è±¡(è¯¥å¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ª<code>iterator</code>)ã€‚</p>
<p>é€šè¿‡<code>yield* otherGenerator()</code>å¯ä»¥å°† generator å†…çš„<code>yield</code>å§”æ‰˜ç»™å…¶ä»– generator ç”Ÿæˆçš„<code>iterable</code>å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"*foo() starting"</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"foo 1"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"foo 2"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"*foo() finished"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 1"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 2"</span>;</span><br><span class="line">  <span class="keyword">yield</span>* foo(); <span class="comment">// `yield`-delegation!</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 3"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> it = bar();</span><br><span class="line"></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "bar 1"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "bar 2"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// *foo() starting</span></span><br><span class="line"><span class="comment">// "foo 1"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "foo 2"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// *foo() finished</span></span><br><span class="line"><span class="comment">// "bar 3"</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåœ¨è°ƒç”¨ç¬¬ 3 ä¸ª<code>next</code>æ–¹æ³•æ—¶è¿”å›çš„æ˜¯<code>foo</code>é‡Œé¢<code>yield</code>çš„<code>&quot;foo 1&quot;</code>ï¼›åœ¨è°ƒç”¨ç¬¬ 5 ä¸ª<code>next</code>æ—¶ï¼Œå¹¶æ²¡æœ‰è¿”å›<code>foo</code> generator éšå¼<code>return</code>çš„<code>undefined</code>,è€Œæ˜¯è¿”å›äº†<code>&quot;bar 3&quot;</code>ã€‚</p>
<p>å¦‚æœ<code>foo</code>å†…æœ‰æ˜¾å¼çš„<code>return</code>è¯­å¥ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œ yield-delegation æ—¶æ˜¯å¦ä¼šè¿”å›<code>foo</code> <code>return</code>çš„å€¼å—ï¼Ÿ</p>
<p>ä¸‹é¢çš„ä»£ç åœ¨<code>foo</code>ä¸­æ·»åŠ äº†ä¸€ä¸ª<code>return</code>è¯­å¥ã€‚åœ¨<code>bar</code>å†…å°†<code>yield* foo()</code>è¡¨è¾¾å¼çš„å€¼èµ‹å€¼ç»™<code>tmp</code>å˜é‡å¹¶æ‰“å°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"*foo() starting"</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"foo 1"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"foo 2"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"*foo() finished"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"foo 3"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 1"</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 2"</span>;</span><br><span class="line">  <span class="keyword">var</span> tmp = <span class="keyword">yield</span>* foo(); <span class="comment">// `yield`-delegation!</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"åœ¨barå†…æ‰“å°"</span>, tmp);</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"bar 3"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> it = bar();</span><br><span class="line"></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "bar 1"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "bar 2"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// *foo() starting</span></span><br><span class="line"><span class="comment">// "foo 1"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// "foo 2"</span></span><br><span class="line">it.next().value;</span><br><span class="line"><span class="comment">// *foo() finished</span></span><br><span class="line"><span class="comment">// åœ¨barå†…æ‰“å° foo 3</span></span><br><span class="line"><span class="comment">// "bar 3"</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ 5 æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå¯ä»¥å‘ç°<code>foo</code> <code>return</code>çš„<code>&quot;foo 3&quot;</code>å˜æˆäº†<code>yield* foo()</code>è¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶è¢«æ‰“å°ä¸º<code>&quot;åœ¨barå†…æ‰“å° foo 3&quot;</code>;<code>&quot;bar 3&quot;</code>æˆä¸º<code>next</code>æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<h3 id="å§”æ‰˜ç»™å…¶ä»–ä»»ä½•å®ç°iterableçš„å¯¹è±¡"><a href="#å§”æ‰˜ç»™å…¶ä»–ä»»ä½•å®ç°iterableçš„å¯¹è±¡" class="headerlink" title="å§”æ‰˜ç»™å…¶ä»–ä»»ä½•å®ç°iterableçš„å¯¹è±¡"></a>å§”æ‰˜ç»™å…¶ä»–ä»»ä½•å®ç°<code>iterable</code>çš„å¯¹è±¡</h3><p>generator å†…éƒ¨çš„<code>yield*</code>è¯­å¥ä¹Ÿèƒ½å°†<code>yield</code>å§”æ‰˜ç»™å…¶ä»–é generator ç”Ÿæˆçš„<code>iterable</code>å¯¹è±¡ã€‚ä¾‹å¦‚ æ•°ç»„å°±æ˜¯ä¸€ä¸ªå®ç°äº†<code>iterable</code>çš„å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span> <span class="string">"A"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `yield`-delegation to a non-generator!</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span>* [<span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span> <span class="string">"E"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"F"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> it = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next().value);</span><br><span class="line"><span class="comment">// outside: A</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">1</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: 1</span></span><br><span class="line"><span class="comment">// outside: B</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">2</span>).value);</span><br><span class="line"><span class="comment">// outside: C</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">3</span>).value);</span><br><span class="line"><span class="comment">// outside: D</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">4</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: undefined</span></span><br><span class="line"><span class="comment">// outside: E</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">5</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: 5</span></span><br><span class="line"><span class="comment">// outside: F</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥å§”æ‰˜ç»™è‡ªå·±æ‰‹å†™çš„<code>iterable</code>å¯¹è±¡ã€‚ç”±äº javascript ä¸æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå¦‚æœå¯¹è±¡ä¸Šå«æœ‰<code>Symbol.iterator</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†è¯¥å¯¹è±¡å½“åšä¸€ä¸ª<code>iterable</code>å¯¹è±¡ï¼›å¦‚æœå¯¹è±¡ä¸Šå«æœ‰<code>next</code>æ–¹æ³•ï¼Œé‚£å°±å¯ä»¥å°†è¯¥å¯¹è±¡å½“åšä¸€ä¸ª<code>iterator</code>å¯¹è±¡ã€‚ä¸‹é¢çš„<code>myIterable</code>å¯¹è±¡å³å®ç°äº†<code>Symbol.iterator</code>æ–¹æ³•ä¹Ÿå®ç°äº†<code>next</code>æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒå³æ˜¯ä¸€ä¸ª<code>iterable</code>åˆæ˜¯ä¸€ä¸ª<code>iterator</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myIterable = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  num: <span class="number">98</span>,</span><br><span class="line">  next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (self.num &lt; <span class="number">101</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="built_in">String</span>.fromCharCode(self.num++), <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="built_in">String</span>.fromCharCode(<span class="number">101</span>), <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span> <span class="string">"A"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `yield`-delegation to a non-generator!</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span>* myIterable);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"inside `*bar()`:"</span>, <span class="keyword">yield</span> <span class="string">"E"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"F"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> it = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next().value);</span><br><span class="line"><span class="comment">// outside: A</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">1</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: 1</span></span><br><span class="line"><span class="comment">// outside: b</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">2</span>).value);</span><br><span class="line"><span class="comment">// outside: c</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">3</span>).value);</span><br><span class="line"><span class="comment">// outside: d</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">4</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: e</span></span><br><span class="line"><span class="comment">// outside: E</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">5</span>).value);</span><br><span class="line"><span class="comment">// inside `*bar()`: 5</span></span><br><span class="line"><span class="comment">// outside: F</span></span><br></pre></td></tr></table></figure>
<h3 id="å¼‚å¸¸å§”æ‰˜"><a href="#å¼‚å¸¸å§”æ‰˜" class="headerlink" title="å¼‚å¸¸å§”æ‰˜"></a>å¼‚å¸¸å§”æ‰˜</h3><p>è¢«å§”æ‰˜çš„<code>iterator</code>å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸ï¼Œå¦‚æœå¼‚å¸¸è¢«æ•è·ï¼Œé‚£ä¹ˆæ•è·å¤„ç†å®Œå¼‚å¸¸åè¿˜æŒ‰åŸæ¥çš„é€»è¾‘è¿è¡Œï¼›å¦‚æœå¼‚å¸¸æœªè¢«æ•è·ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«æŠ›å‡ºï¼Œå¼‚å¸¸ä¼šè¢«æŠ›åˆ°<code>yield*</code>è¯­å¥é‚£ã€‚ä¸‹é¢æ˜¯ã€ŠYOU DONâ€™T KNOW JSã€‹å†…çš„ä¾‹å­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">"B"</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"error caught inside `*foo()`:"</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"C"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">throw</span> <span class="string">"D"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"A"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span>* foo();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"error caught inside `*bar()`:"</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"E"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">yield</span>* baz();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// note: can't get here!</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"G"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">"F"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> it = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next().value);</span><br><span class="line"><span class="comment">// outside: A</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">1</span>).value);</span><br><span class="line"><span class="comment">// outside: B</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.throw(<span class="number">2</span>).value);</span><br><span class="line"><span class="comment">// error caught inside `*foo()`: 2</span></span><br><span class="line"><span class="comment">// outside: C</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">3</span>).value);</span><br><span class="line"><span class="comment">// error caught inside `*bar()`: D</span></span><br><span class="line"><span class="comment">// outside: E</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"outside:"</span>, it.next(<span class="number">4</span>).value);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"error caught outside:"</span>, err);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// error caught outside: F</span></span><br></pre></td></tr></table></figure>
<h3 id="é€’å½’å§”æ‰˜"><a href="#é€’å½’å§”æ‰˜" class="headerlink" title="é€’å½’å§”æ‰˜"></a>é€’å½’å§”æ‰˜</h3><p>ä¸‹é¢æ˜¯ã€ŠYOU DONâ€™T KNOW JSã€‹é‡Œçš„ä¾‹å­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (val &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// generator recursion</span></span><br><span class="line">    val = <span class="keyword">yield</span>* foo(val - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">yield</span> request(<span class="string">"http://some.url/?v="</span> + val);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> r1 = <span class="keyword">yield</span>* foo(<span class="number">3</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(r1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run(bar);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/å®ç°ä¸€ä¸ªasyncå‡½æ•°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/å®ç°ä¸€ä¸ªasyncå‡½æ•°/" class="post-title-link" itemprop="url">å®ç°ä¸€ä¸ªasyncå‡½æ•°</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:45:09" itemprop="dateCreated datePublished" datetime="2019-02-28T15:45:09+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>async å‡½æ•°èƒ½å°† promise é“¾å¼è°ƒç”¨çš„å†™æ³•æ”¹æˆåŒæ­¥çš„å†™æ³•ã€‚è®©ä»£ç å˜å¾—æ›´ç®€æ´æ˜“æ‡‚ã€‚es6 ä¸­çš„ async æ˜¯è¯­æ³•ç³–ï¼Œæˆ‘ä»¬è‡ªå·±å¯ä»¥å®ç°ç±»ä¼¼ async å‡½æ•°çš„åŠŸèƒ½ã€‚</p>
<p>ä¸‹é¢æ˜¯<code>myAsync</code>çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123;Function&#125; gen ä¸€ä¸ªgeneratorå‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myAsync</span>(<span class="params">gen</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>),</span><br><span class="line">    it;</span><br><span class="line">  it = gen.apply(<span class="keyword">this</span>, args);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">nextVal</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!nextVal.done) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(nextVal.value).then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> fn(it.next(v));</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> fn(it.throw(err));</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(nextVal.value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fn(it.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‹é¢è¿™ä¸ªå‡½æ•°æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚è¿”å›ä¸€ä¸ªpromise</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; resource èµ„æºçš„è·¯å¾„åœ°å€</span></span><br><span class="line"><span class="comment"> * @param &#123;Boolean&#125; success trueè¡¨ç¤ºèƒ½è¯·æ±‚æˆåŠŸ,falseè¡¨ç¤ºè¯·æ±‚å¤±è´¥</span></span><br><span class="line"><span class="comment"> * @returns &#123;Promise&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">resource, success</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> randomTime = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * <span class="number">10</span>) * <span class="number">100</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(resource + <span class="string">" spend:"</span>, randomTime);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (success) &#123;</span><br><span class="line">        resolve(resource);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(resource);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, randomTime);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‹é¢çš„generatorå‡½æ•°å†™å¹³å¸¸çš„ä¸šåŠ¡é€»è¾‘ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœä¸‹é¢çš„console.timeå¾—å‡ºæ¥çš„æ—¶é—´ä¸ä¸‰æ¡è¯·æ±‚çš„æ—¶é—´ä¹‹å’Œ</span></span><br><span class="line"><span class="comment"> * å¤§çº¦ç›¸ç­‰ï¼Œè¯´æ˜mainå‡½æ•°å†…çš„ä»£ç ä»¥ç±»ä¼¼åŒæ­¥çš„æ–¹å¼æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params">returnValue</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">"count"</span>);</span><br><span class="line">  <span class="keyword">var</span> rq1 = <span class="keyword">yield</span> request(<span class="string">"/request1"</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">var</span> rq2 = <span class="keyword">yield</span> request(<span class="string">"/request2"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> rq3 = <span class="keyword">yield</span> request(<span class="string">"/request3"</span>, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"this is an error"</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> rq4 = <span class="keyword">yield</span> request(<span class="string">"/request4"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">"count"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(returnValue);</span><br><span class="line">  <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myAsync(main, <span class="string">"hello my async"</span>);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º<code>main</code>å‡½æ•°å†…éƒ¨å†™æ³•å’Œ es6 çš„ async å‡½æ•°å¾ˆç›¸ä¼¼ï¼Œç›¸å½“äºå°†<code>await</code>æ›¿æ¢æˆ<code>yield</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯ generator ä¸­å‡ºç°<code>yield</code>-delegation ä¸­çš„æµ‹è¯•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œä¾èµ–ä¸Šé¢çš„ myAsync å’Œ request æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">subTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> rq2 = <span class="keyword">yield</span> request(<span class="string">"/request2"</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">var</span> rq3 = <span class="keyword">yield</span> request(<span class="string">"/request3"</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">var</span> rq4 = <span class="keyword">yield</span> request(<span class="string">"/request4"</span>, <span class="literal">false</span>); <span class="comment">// promise rejected</span></span><br><span class="line">  <span class="keyword">var</span> rq5 = <span class="keyword">yield</span> request(<span class="string">"/request5"</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params">returnValue</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">"count"</span>);</span><br><span class="line">  <span class="keyword">var</span> rq1 = <span class="keyword">yield</span> request(<span class="string">"/request1"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span>* subTask();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"catch error from subTask."</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> rq5 = <span class="keyword">yield</span> request(<span class="string">"/request6"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">"count"</span>);</span><br><span class="line">  <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myAsync(main, <span class="string">"hello my async"</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ main æ–¹æ³•å†…<code>yield*</code>è¯­å¥å°†<code>yield</code>å§”æ‰˜ç»™äº† subTask æ–¹æ³•ï¼Œå¹¶ä¸”<code>subTask</code>å†… req4 çš„ promise è¢« rejectedã€‚æ­¤æ—¶çš„ myAsync è¿˜èƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<p>ä¸‹é¢æ˜¯ generator ä¸­å‡ºç°é€’å½’å§”æ‰˜çš„æµ‹è¯•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œä¾èµ–ä¸Šé¢çš„ myAsync å’Œ request æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">subTask</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span>* subTask(num + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">yield</span> request(<span class="string">"/request"</span> + num, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params">returnValue</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">"count"</span>);</span><br><span class="line">  <span class="keyword">var</span> rq1 = <span class="keyword">yield</span> request(<span class="string">"/request1"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">yield</span>* subTask(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> rq4 = <span class="keyword">yield</span> request(<span class="string">"/request4"</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">"count"</span>);</span><br><span class="line">  <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myAsync(main, <span class="string">"hello my async"</span>);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/generatorå†…éƒ¨æŠ›å‡ºå¼‚å¸¸æ—¶çš„æ‰§è¡Œæœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/generatorå†…éƒ¨æŠ›å‡ºå¼‚å¸¸æ—¶çš„æ‰§è¡Œæœºåˆ¶/" class="post-title-link" itemprop="url">generatorå†…éƒ¨æŠ›å‡ºå¼‚å¸¸æ—¶çš„æ‰§è¡Œæœºåˆ¶</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:42:22" itemprop="dateCreated datePublished" datetime="2019-02-28T15:42:22+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ‰§è¡Œ generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª iterator,iterator è°ƒç”¨<code>next</code>æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœ<code>next</code>æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸æ˜¯å¦è¿˜ä¼šè¿”å›å€¼å‘¢ï¼Ÿå¦‚æœè¿”å›å€¼çš„è¯ï¼Œä¼šè¿”å›é‚£ä¸ªå€¼å‘¢ï¼Ÿ</p>
<h4 id="æƒ…å†µä¸€ï¼šæ•è·çš„å¼‚å¸¸"><a href="#æƒ…å†µä¸€ï¼šæ•è·çš„å¼‚å¸¸" class="headerlink" title="æƒ…å†µä¸€ï¼šæ•è·çš„å¼‚å¸¸"></a>æƒ…å†µä¸€ï¼šæ•è·çš„å¼‚å¸¸</h4><p><code>main</code> generator å†…å‡ºç°äº†ä¸€ä¸ªè¢«æ•è·çš„å¼‚å¸¸ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    undefinedValue.sayHello(); <span class="comment">// è¿™é‡Œä¼šå‡ºç°ReferenceError</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ•è·äº†å¼‚å¸¸"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> it = main();</span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// æ•è·äº†å¼‚å¸¸</span></span><br><span class="line"><span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// &#123;value: 4, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œæ‰“å°äº†â€œæ•è·äº†å¼‚å¸¸â€çš„å­—æ ·ï¼Œå¹¶è¿”å›äº† <code>{value: 3, done: false}</code>ã€‚è¯´æ˜<code>yield 2</code>è¢«è·³è¿‡ï¼Œå¹¶æ‰§è¡Œ<code>yield 3</code>ã€‚</p>
<h4 id="æƒ…å†µäºŒï¼šæœªæ•è·çš„å¼‚å¸¸"><a href="#æƒ…å†µäºŒï¼šæœªæ•è·çš„å¼‚å¸¸" class="headerlink" title="æƒ…å†µäºŒï¼šæœªæ•è·çš„å¼‚å¸¸"></a>æƒ…å†µäºŒï¼šæœªæ•è·çš„å¼‚å¸¸</h4><p><code>main</code> generator å†…å‡ºç°äº†ä¸€ä¸ªæœªè¢«æ•è·çš„å¼‚å¸¸ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">main</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    undefinedValue.sayHello();<span class="comment">// è¿™é‡Œä¼šå‡ºç°ReferenceError</span></span><br><span class="line">	<span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> it=main();</span><br><span class="line">it.next()ï¼›</span><br><span class="line"><span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">it.next()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•æ˜¯å¦ä¼šæ‰“å°'</span>)</span><br><span class="line"><span class="comment">// Uncaught ReferenceError: undefinedValue is not defined</span></span><br><span class="line"><span class="comment">//     at main (&lt;anonymous&gt;:4:5)</span></span><br><span class="line"><span class="comment">//     at main.next (&lt;anonymous&gt;)</span></span><br><span class="line"><span class="comment">//     at &lt;anonymous&gt;:1:4</span></span><br><span class="line">it</span><br><span class="line"><span class="comment">// main &#123;&lt;closed&gt;&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•è¢«è°ƒç”¨æ—¶ç›´æ¥æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå¹¶ä¸”åé¢çš„<code>console.log(&#39;æµ‹è¯•æ˜¯å¦ä¼šæ‰“å°&#39;)</code>æ²¡è¢«æ‰§è¡Œã€‚å†æ¬¡æŸ¥çœ‹<code>it</code>æ—¶ï¼Œå‘ç°å®ƒçš„çŠ¶æ€å˜æˆäº†<code>closed</code>ã€‚</p>
<h4 id="æƒ…å†µä¸‰ï¼šé€šè¿‡-iterator-çš„throwæ–¹æ³•äº§ç”Ÿçš„å¼‚å¸¸"><a href="#æƒ…å†µä¸‰ï¼šé€šè¿‡-iterator-çš„throwæ–¹æ³•äº§ç”Ÿçš„å¼‚å¸¸" class="headerlink" title="æƒ…å†µä¸‰ï¼šé€šè¿‡ iterator çš„throwæ–¹æ³•äº§ç”Ÿçš„å¼‚å¸¸"></a>æƒ…å†µä¸‰ï¼šé€šè¿‡ iterator çš„<code>throw</code>æ–¹æ³•äº§ç”Ÿçš„å¼‚å¸¸</h4><p>æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•ä¹‹åè°ƒç”¨ iterator çš„<code>throw</code>æ–¹æ³•äº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸åˆšå¥½è¢«<code>try..catch</code>æ•è·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> it = main();</span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line">it.throw(<span class="string">"å¼‚å¸¸"</span>);</span><br><span class="line"><span class="comment">// å¼‚å¸¸</span></span><br><span class="line"><span class="comment">// &#123;value: 4, done: false&#125;</span></span><br><span class="line">it.next();</span><br><span class="line"><span class="comment">// &#123;value: 5, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•åé¢è°ƒç”¨ iterator çš„<code>throw</code>æ–¹æ³•äº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ï¼Œæ­¤æ—¶çš„å¼‚å¸¸å‡ºç°åœ¨<code>yield 2</code>çš„ä½ç½®ï¼Œå¹¶è¢«<code>try..catch</code>æ•è·å¤„ç†ï¼Œæ‰€ä»¥ç¨‹åºè·³è¿‡äº†<code>yield 3</code>æ‰§è¡Œäº†<code>yield 4</code>ã€‚</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å¦‚æœ generatorâ€™s iterator è°ƒç”¨<code>next</code>çš„è¿‡ç¨‹ä¸­é‡åˆ°è¢«æ•è·çš„å¼‚å¸¸ï¼Œå®ƒå¤„ç†å®Œå¼‚å¸¸åä¼šç»§ç»­è¿è¡Œï¼Œç›´åˆ°ç¢°åˆ°<code>yield</code> <code>return</code>æˆ–å‡½æ•°çš„ç»“å°¾ã€‚å¦‚æœé‡åˆ°çš„æ˜¯æœªè¢«æ•è·çš„å¼‚å¸¸ï¼Œå®ƒå°†æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸” iterator çš„çŠ¶æ€å˜ä¸º<code>closed</code>ã€‚é€šè¿‡ iterator çš„<code>throw</code>æ–¹æ³•äº§ç”Ÿçš„å¼‚å¸¸å’Œæ™®é€šçš„å¼‚å¸¸æ˜¯ä¸€æ ·çš„æ‰§è¡Œé€»è¾‘ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/javascriptä¸­å†…å»ºç±»å‹çš„åˆ¤æ–­/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/javascriptä¸­å†…å»ºç±»å‹çš„åˆ¤æ–­/" class="post-title-link" itemprop="url">javascriptä¸­å†…å»ºç±»å‹çš„åˆ¤æ–­</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:41:01" itemprop="dateCreated datePublished" datetime="2019-02-28T15:41:01+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>javascript ä¸­å†…å»ºç±»å‹ï¼ˆbuilt-in typesï¼‰æœ‰ä¸ƒä¸ª,åŒ…æ‹¬ <code>null</code> <code>undefined</code> <code>boolean</code> <code>number</code> <code>string</code> <code>symbol</code> <code>object</code>ã€‚å…¶ä¸­é™¤äº† <code>object</code> å¤–ï¼Œå¦å¤–çš„ 6 ä¸ªç±»å‹éƒ½æ˜¯åŸå§‹ï¼ˆprimitiveï¼‰ç±»å‹ã€‚javascript å†…çš„å‡½æ•°å’Œæ•°ç»„éƒ½æ˜¯ <code>object</code> ç±»å‹ã€‚</p>
<p>åœ¨å¹³æ—¶å·¥ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ•°æ®çš„ç±»å‹ã€‚</p>
<h2 id="ç”¨-typeof-æ¥åŒºåˆ†å†…å»ºç±»å‹"><a href="#ç”¨-typeof-æ¥åŒºåˆ†å†…å»ºç±»å‹" class="headerlink" title="ç”¨ typeof æ¥åŒºåˆ†å†…å»ºç±»å‹"></a>ç”¨ <code>typeof</code> æ¥åŒºåˆ†å†…å»ºç±»å‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// "undefined"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// "boolean"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">10</span>; <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"hello"</span>; <span class="comment">// "string"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>(); <span class="comment">// "symbol"</span></span><br><span class="line"><span class="keyword">typeof</span> &#123; <span class="attr">name</span>: <span class="string">"Allen"</span> &#125;; <span class="comment">// "object"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// "function"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span>; <span class="comment">// "number"</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ç»“æœä¸­å¯ä»¥çœ‹å‡º <code>typeof</code> è¿”å›çš„ç»“æœåŸºæœ¬æ˜¯æ­£ç¡®çš„,é™¤äº† <code>typeof null</code> å’Œ <code>typeof function</code>ã€‚</p>
<p><code>typeof nulll</code> è¿”å› <code>object</code> æ˜¯æ—©æœŸè¯­è¨€è®¾è®¡ä¸Šçš„é”™è¯¯ã€‚ç”±äºå¤ªå¤šä»£ç åˆ©ç”¨äº†è¿™ä¸ªé”™è¯¯ç‰¹æ€§ï¼Œæ‰€ä»¥æµè§ˆå™¨åŸºæœ¬ä¸Šæ²¡å¯èƒ½å»ä¿®æ­£è¿™ä¸ª bug äº†ï¼Œä¸ç„¶ä¼šå¯¼è‡´æ›´å¤šçš„ bugã€‚</p>
<p><code>typeof function hi(){}</code> è¿”å› <code>function</code> çœ‹ä¼¼å¾ˆåˆç†ï¼Œå…¶å® <code>function</code> åœ¨ JS å†…å¹¶ä¸æ˜¯é¡¶çº§çš„å†…å»ºç±»å‹ï¼Œå®ƒæ˜¯ <code>object</code> çš„å­ç±»å‹ï¼Œæ‰€ä»¥å®ƒè¿”å› <code>object</code> ä¼šæ›´åˆç†äº›ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/javascriptä¸­çš„ç¨€ç–æ•°ç»„å’Œempty-slot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/javascriptä¸­çš„ç¨€ç–æ•°ç»„å’Œempty-slot/" class="post-title-link" itemprop="url">javascriptä¸­çš„ç¨€ç–æ•°ç»„ä¸empty slot</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:40:07" itemprop="dateCreated datePublished" datetime="2019-02-28T15:40:07+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// no `a[1]` slot set here</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">a[<span class="number">1</span>]; <span class="comment">// undefined;</span></span><br><span class="line"></span><br><span class="line">a.lenght; <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œäº§ç”Ÿäº†ä¸€ä¸ªç¨€ç–æ•°ç»„ï¼Œ<code>a[1]</code>è¿™é‡Œæ˜¯ä¸€ä¸ª empty slotã€‚åœ¨è°·æ­Œæµè§ˆå™¨æ§åˆ¶å°å†…æ˜¾ç¤ºæ ·å­å¦‚ä¸‹ï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4863/WEBRESOURCEe5262cded20050416ff8700a81554beb" alt="ç¨€ç–æ•°ç»„.png"></p>
<p><code>delete</code> æ“ä½œç¬¦ä¹Ÿèƒ½äº§ç”Ÿä¸€ä¸ª empty,ä»¥ä¸Šé¢çš„æ•°ç»„<code>a</code>ä¸ºä¾‹å­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> a[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">a; <span class="comment">// [1, empty x 2]</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è°·æ­Œæµè§ˆå™¨æ§åˆ¶å°å†…æ˜¾ç¤ºæ ·å­å¦‚ä¸‹ï¼š</p>
<p><img src="https://note.youdao.com/yws/res/4873/WEBRESOURCE71e831eef536015e7a107f31ecf48f0f" alt="deleteä¸€ä¸ªå±æ€§.png"></p>
<p>ç”¨<code>new Array(3)</code>æ–¹æ³•ä¹Ÿä¼šç”Ÿæˆ empty slotã€‚</p>
<h2 id="emptyå’Œåˆ»æ„èµ‹å€¼ä¸ºundefinedæœ‰å·®åˆ«å—ï¼Ÿ"><a href="#emptyå’Œåˆ»æ„èµ‹å€¼ä¸ºundefinedæœ‰å·®åˆ«å—ï¼Ÿ" class="headerlink" title="emptyå’Œåˆ»æ„èµ‹å€¼ä¸ºundefinedæœ‰å·®åˆ«å—ï¼Ÿ"></a><code>empty</code>å’Œåˆ»æ„èµ‹å€¼ä¸º<code>undefined</code>æœ‰å·®åˆ«å—ï¼Ÿ</h2><p>ä»ç¬¬ä¸€ä¸ªä¾‹å­çœ‹åˆ°ï¼Œ<code>a[1]</code>è¿”å›çš„å€¼æ˜¯<code>undefined</code>ã€‚é‚£ä¹ˆè¿™å’Œæˆ‘ä»¬ç›´æ¥èµ‹å€¼<code>a[1]</code>ä¸º<code>undefined</code>æœ‰å·®åˆ«å—ï¼Ÿ</p>
<p>æœ‰å·®åˆ«ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, , <span class="number">3</span>]; <span class="comment">// [1,empty,3]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">3</span>]; <span class="comment">// [1,undefined,3]</span></span><br><span class="line"></span><br><span class="line">a.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>); <span class="comment">// [2,empty,6]</span></span><br><span class="line">b.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>); <span class="comment">// [2, NaN, 6]</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç°ï¼Œ<code>map</code>æ–¹æ³•ä¼šè·³è¿‡<code>a</code>æ•°ç»„çš„ empty slot,è€Œä¸ä¼šè·³è¿‡è¢«æ˜¾å¼è®¾ä¸º<code>undefined</code>çš„<code>b[1]</code>é¡¹ã€‚</p>
<p>ä¸ä»…ä»…æ˜¯<code>map</code>æ–¹æ³•ï¼Œè¿˜æœ‰å¾ˆå¤šä¸éå†æ•°ç»„ç›¸å…³çš„æ“ä½œéƒ½ä¸ºè·³è¿‡ empty slotã€‚</p>
<p>æˆ‘æµ‹è¯•äº†æ‰€æœ‰æˆ‘èƒ½æƒ³åˆ°ä¸æ•°ç»„ç›¸å…³çš„æ“ä½œï¼Œåˆ—å‡ºäº†ä»¥ä¸‹ä¸¤ä¸ªåˆ—è¡¨ã€‚</p>
<h4 id="ä¼šè·³è¿‡-empty-slot-çš„æ“ä½œ"><a href="#ä¼šè·³è¿‡-empty-slot-çš„æ“ä½œ" class="headerlink" title="ä¼šè·³è¿‡ empty slot çš„æ“ä½œ"></a>ä¼šè·³è¿‡ empty slot çš„æ“ä½œ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, , <span class="number">3</span>];</span><br><span class="line"><span class="comment">// [1,empty,3]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// [1,undefined,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mapæ–¹æ³•</span></span><br><span class="line">a.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>);</span><br><span class="line"><span class="comment">// [2,empty,6]</span></span><br><span class="line">b.map(<span class="function"><span class="params">v</span> =&gt;</span> v * <span class="number">2</span>);</span><br><span class="line"><span class="comment">// [2, NaN, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// forEachæ–¹æ³•</span></span><br><span class="line">a.forEach(<span class="function">(<span class="params">v, k</span>) =&gt;</span> <span class="built_in">console</span>.log(v, k));</span><br><span class="line"><span class="comment">// 1 0</span></span><br><span class="line"><span class="comment">// 3 2</span></span><br><span class="line">b.forEach(<span class="function">(<span class="params">v, k</span>) =&gt;</span> <span class="built_in">console</span>.log(v, k));</span><br><span class="line"><span class="comment">// 1 0</span></span><br><span class="line"><span class="comment">// undefined 1</span></span><br><span class="line"><span class="comment">// 3 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filteræ–¹æ³•</span></span><br><span class="line">a.filter(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> (v + <span class="string">"a"</span>) === <span class="string">"string"</span>);</span><br><span class="line"><span class="comment">// [1,3]</span></span><br><span class="line">b.filter(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> (v + <span class="string">"a"</span>) === <span class="string">"string"</span>);</span><br><span class="line"><span class="comment">// [1, undefined, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// someæ–¹æ³•</span></span><br><span class="line">a.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> v === <span class="string">"undefined"</span>);</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line">a.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> v === <span class="string">"undefined"</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// everyæ–¹æ³•</span></span><br><span class="line">a.every(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> v === <span class="string">"number"</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">b.every(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">typeof</span> v === <span class="string">"number"</span>);</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reduceæ–¹æ³•</span></span><br><span class="line">a.reduce(<span class="function">(<span class="params">ac, v</span>) =&gt;</span> ac + v, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// "13"</span></span><br><span class="line">b.reduce(<span class="function">(<span class="params">ac, v</span>) =&gt;</span> ac + v, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// "1undefined3"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reduceRightæ–¹æ³•</span></span><br><span class="line">a.reduceRight(<span class="function">(<span class="params">ac, v</span>) =&gt;</span> ac + v, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// "31"</span></span><br><span class="line">b.reduceRight(<span class="function">(<span class="params">ac, v</span>) =&gt;</span> ac + v, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// "3undefined1"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// indexOfæ–¹æ³•</span></span><br><span class="line">a.indexOf(<span class="literal">undefined</span>); <span class="comment">// false</span></span><br><span class="line">b.indexOf(<span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for..in å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> a) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> b) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// in æ“ä½œç¬¦</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> a;</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> b;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.keysæ–¹æ³•</span></span><br><span class="line"><span class="built_in">Object</span>.keys(a);</span><br><span class="line"><span class="comment">// ["0", "2"]</span></span><br><span class="line"><span class="built_in">Object</span>.keys(b);</span><br><span class="line"><span class="comment">// ["0", "1", "2"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.valuesæ–¹æ³•</span></span><br><span class="line"><span class="built_in">Object</span>.values(a);</span><br><span class="line"><span class="comment">// [1, 3]</span></span><br><span class="line"><span class="built_in">Object</span>.values(b);</span><br><span class="line"><span class="comment">// [1, undefined, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.entriesæ–¹æ³•</span></span><br><span class="line"><span class="built_in">Object</span>.entries(a);</span><br><span class="line"><span class="comment">// [["0",1],["2",3]]</span></span><br><span class="line"><span class="built_in">Object</span>.entries(b);</span><br><span class="line"><span class="comment">// [["0",1],["1", undefined],["2",3]]</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸ä¼šè·³è¿‡-empty-slot-çš„æ“ä½œ"><a href="#ä¸ä¼šè·³è¿‡-empty-slot-çš„æ“ä½œ" class="headerlink" title="ä¸ä¼šè·³è¿‡ empty slot çš„æ“ä½œ"></a>ä¸ä¼šè·³è¿‡ empty slot çš„æ“ä½œ</h4><p>ä»¥ä¸‹åˆ—å‡ºæˆ‘ä»¬å¯èƒ½è¯¯ä»¥ä¸ºä¼šè·³è¿‡ empty slot çš„æ“ä½œï¼Œå®é™…ä¸Šä¸‹é¢çš„æ“ä½œä¸ä¼šè·³è¿‡ empty slotã€‚å°¤å…¶æ˜¯ä¸‹é¢çš„<code>for..of</code>æ“ä½œéœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,,<span class="number">3</span>]; <span class="comment">// [1,empty,3]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>,<span class="literal">undefined</span>,<span class="number">3</span>]; <span class="comment">// [1,undefined,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findæ–¹æ³•,è¯¥æ–¹æ³•è¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼</span></span><br><span class="line"><span class="comment">// findå›è°ƒæ–¹æ³•å†…ç†åº”è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯æ²¡ä»€ä¹ˆç”¨çš„ï¼Œä»…ä»…åªæ˜¯ä¸ºäº†æµ‹è¯•</span></span><br><span class="line">a.find(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="built_in">console</span>.log(v)&#125;);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line">b.find(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="built_in">console</span>.log(v)&#125;);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findIndexæ–¹æ³•ï¼ŒåŒä¸Šã€‚</span></span><br><span class="line"><span class="comment">// ä¸åŒçš„æ˜¯findIndexè¿”å›çš„æ˜¯ç´¢å¼•å€¼</span></span><br><span class="line">a.findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="built_in">console</span>.log(v)&#125;);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line">b.findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;<span class="built_in">console</span>.log(v)&#125;);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for..of å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> a)&#123;<span class="built_in">console</span>.log(v)&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> b)&#123;<span class="built_in">console</span>.log(v)&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„ä¸‰ä¸ªæ–¹æ³•çœ‹èµ·æ¥ä¸Objectæ„é€ å‡½æ•°ä¸Šçš„keys values entriesæ–¹æ³•å¾ˆåƒï¼Œ</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯ä»–ä»¬ä¸ä¼šè·³è¿‡empty slot,è€Œä¸”è¿”å›çš„å€¼æ˜¯Iteratorè€Œä¸æ˜¯æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦å°†Iteratorå†…çš„å€¼å–å‡ºï¼Œå¹¶æ”¾åˆ°æ•°ç»„å†…</span></span><br><span class="line"><span class="comment">// Array.prototype.keysæ–¹æ³•</span></span><br><span class="line">[...a.keys()]</span><br><span class="line"><span class="comment">// [0, 1, 2]</span></span><br><span class="line">[...b.keys()]</span><br><span class="line"><span class="comment">// [0, 1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.valuesæ–¹æ³•</span></span><br><span class="line">[...a.values()]</span><br><span class="line"><span class="comment">// [1, undefined, 3]</span></span><br><span class="line">[...b.values()]</span><br><span class="line"><span class="comment">// [1, undefined, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.prototype.entriesæ–¹æ³•</span></span><br><span class="line">[...a.entries()]</span><br><span class="line"><span class="comment">// [[0,1],[1,undefined], [2,3]]</span></span><br><span class="line">[...b.entries()]</span><br><span class="line"><span class="comment">// [[0,1],[1,undefined], [2,3]]</span></span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸ç»™æ•°ç»„å†…çš„æŸä¸ª slot èµ‹å€¼,æˆ–ä½¿ç”¨<code>delete</code>æ“ä½œæ•°ç»„ï¼Œæˆ–ç”¨<code>new Array</code>ç”Ÿæˆæ•°ç»„éƒ½ä¼šç”Ÿæˆ empty slotã€‚å¤§éƒ¨åˆ†ä¸éå†ç›¸å…³çš„æ–¹æ³•å’Œæ“ä½œä¼šè·³è¿‡ empty slotï¼›ä½†æœ‰å‡ ä¸ªæ“ä½œä¾‹å¤–ï¼Œå°¤å…¶è¦æ³¨æ„<code>for..of</code>å¾ªç¯ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/javascriptä¸­çš„undefined/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/javascriptä¸­çš„undefined/" class="post-title-link" itemprop="url">javascriptä¸­çš„undefined</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:38:50" itemprop="dateCreated datePublished" datetime="2019-02-28T15:38:50+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>javascript ä¸­çš„<code>undefined</code>æœ‰å¾ˆå¤šçš„è¿·æƒ‘æ€§ï¼Œéå¸¸è®©äººéš¾ä»¥ç†è§£ã€‚</p>
<h2 id="undefined-ç­‰åŒäº-â€œæœªå£°æ˜â€-å—ï¼Ÿ"><a href="#undefined-ç­‰åŒäº-â€œæœªå£°æ˜â€-å—ï¼Ÿ" class="headerlink" title="undefined ç­‰åŒäº â€œæœªå£°æ˜â€ å—ï¼Ÿ"></a><code>undefined</code> ç­‰åŒäº â€œæœªå£°æ˜â€ å—ï¼Ÿ</h2><p><code>undefined</code>ä¸­æ–‡æ„æ€ä¸ºâ€œæœªå®šä¹‰â€ï¼Œæˆ‘ä»¬å¯èƒ½å°±ä¼šè®¤ä¸º<code>undefined</code>å°±æ˜¯å˜é‡â€œæœªå£°æ˜â€ã€‚</p>
<p>ä½†å…¶å®å¹¶ä¸æ˜¯è¿™æ ·ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line">a; <span class="comment">// undefined</span></span><br><span class="line">b; <span class="comment">// ReferenceError: b is not defined</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åªå£°æ˜äº†å˜é‡<code>a</code>ï¼Œä½†è·å–<code>a</code>æ—¶ï¼Œè¿”å›çš„ç»“æœæ˜¯<code>undefined</code>,è·å–<code>b</code>æ—¶æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<p>è¿™è¯´æ˜<code>undefined</code>ä¸æ˜¯â€œæœªå£°æ˜â€çš„æ„æ€ï¼Œåœ¨å¼•ç”¨â€œæœªå£°æ˜â€çš„å˜é‡æ—¶ä¼šæŠ›å‡º<code>ReferenceError</code>çš„å¼‚å¸¸ã€‚</p>
<h3 id="å®‰å…¨å®ˆå«ï¼ˆsafety-guardï¼‰"><a href="#å®‰å…¨å®ˆå«ï¼ˆsafety-guardï¼‰" class="headerlink" title="å®‰å…¨å®ˆå«ï¼ˆsafety guardï¼‰"></a>å®‰å…¨å®ˆå«ï¼ˆsafety guardï¼‰</h3><p>ä¸Šé¢çš„ä¾‹å­è¯´æ˜äº†â€œæœªå£°æ˜â€çš„å˜é‡åœ¨å¼•ç”¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä½†æ˜¯æˆ‘ä»¬çš„ä»£ç æœ‰æ—¶éœ€è¦ä¾èµ–å…¨å±€çš„æŸä¸ªå˜é‡,è€Œä¸”æˆ‘ä»¬ä¸çŸ¥é“è¯¥å˜é‡æ˜¯å¦å·²è¢«å£°æ˜ã€‚æˆ‘ä»¬å¯èƒ½ä¼šåƒä¸‹é¢é‚£æ ·å†™ä¸€ä¸ª<code>if</code>è¯­å¥æ¥åˆ¤æ–­è¯¥å˜é‡æ˜¯å¦å­˜åœ¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (DEBUG) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Debugging is starting"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢ä¾‹å­ä¸­ï¼Œå¦‚æœ<code>DEBUG</code>å¹¶æœªè¢«å£°æ˜çš„è¯ï¼Œä¼šæŠ›å‡º<code>ReferenceError</code>å¹¶æ‰“æ–­äº†ä»£ç çš„è¿è¡Œã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯å½“<code>DEBUG</code>ä¸º true æ—¶ï¼Œæ‰§è¡Œå†…éƒ¨çš„é€»è¾‘ï¼Œ<code>DEBUG</code>ä¸º falsy æˆ–â€œæœªå£°æ˜â€æ—¶ï¼Œè·³è¿‡é‡Œé¢çš„ä»£ç ï¼Œè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä»¥ä¸‹æœ‰å¤šç§æ–¹å¼å®ç°ä¸€ä¸ªå®‰å…¨å®ˆå«ï¼Œé˜²æ­¢ javascript æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h5 id="æ–¹æ³•-1ï¼štypeof"><a href="#æ–¹æ³•-1ï¼štypeof" class="headerlink" title="æ–¹æ³• 1ï¼štypeof"></a>æ–¹æ³• 1ï¼š<code>typeof</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> a; <span class="comment">// "undefined"</span></span><br><span class="line"><span class="keyword">typeof</span> b; <span class="comment">// "undefined"</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥å‘ç°ï¼Œæ— è®ºæ˜¯å·²å£°æ˜çš„è¿˜æ˜¯æœªå£°æ˜çš„å˜é‡ï¼Œ<code>typeof</code> è¿”å›çš„ç»“æœéƒ½æ˜¯<code>undefined</code>ï¼Œè€Œä¸”<code>typeof b</code>ä¹Ÿä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä½œä¸ºä¸€ä¸ª safety guardã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> DEBUG !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Debugging is starting"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ–¹æ³•-2ï¼šå¯¹è±¡å±æ€§"><a href="#æ–¹æ³•-2ï¼šå¯¹è±¡å±æ€§" class="headerlink" title="æ–¹æ³• 2ï¼šå¯¹è±¡å±æ€§"></a>æ–¹æ³• 2ï¼šå¯¹è±¡å±æ€§</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Allen"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.gender; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥å¾—å‡ºï¼Œè®¿é—®ä¸€ä¸ªæœªå®šä¹‰çš„å¯¹è±¡å±æ€§ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œjavascript ä¸­å…¨å±€çš„å˜é‡ï¼Œå…¶å®å°±æ˜¯<code>window</code>å¯¹è±¡ä¸Šçš„å±æ€§ã€‚ç»“åˆä¸Šé¢å¾—å‡ºçš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¯¥ç‰¹æ€§ï¼Œå®ç° safety guardã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.DEBUG) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Debugging is starting"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•ï¼Œä¸åˆ©ä¸è·¨å¹³å°ï¼Œåº”ä¸ºåœ¨ nodejs ä¸­æ²¡æœ‰<code>window</code>å¯¹è±¡ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://allenmrbai.github.io/2019/02/28/json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åšä¸»">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ çš„è¿‡ç¨‹">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Allen's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/json/" class="post-title-link" itemprop="url">javascript API JSON</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºäºï¼š2019-02-28 15:37:09" itemprop="dateCreated datePublished" datetime="2019-02-28T15:37:09+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="æ›´æ–°äºï¼š2025-04-24 17:20:11" itemprop="dateModified" datetime="2025-04-24T17:20:11+08:00">2025-04-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ‰€æœ‰ javascript å†…æ‰€æœ‰ JSON-safe çš„å€¼éƒ½å¯ä»¥è¢« <code>JSON.stringify</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="number">42</span>);</span><br><span class="line"><span class="comment">// "42"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">"42"</span>);</span><br><span class="line"><span class="comment">// ""42"" (a string with a quoted string value in it)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// "null"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// "true"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">"Allen"</span>, <span class="attr">hobby</span>: <span class="string">"painting"</span> &#125;);</span><br><span class="line"><span class="comment">// "&#123;"name":"Allen","hobby":"painting"&#125;"</span></span><br></pre></td></tr></table></figure>
<h2 id="JSON-safe-çš„å€¼"><a href="#JSON-safe-çš„å€¼" class="headerlink" title="JSON-safe çš„å€¼"></a>JSON-safe çš„å€¼</h2><p>ä»€ä¹ˆæ˜¯ JSON-safe çš„å€¼å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ä¸æ–¹ä¾¿è·¨è¯­è¨€çš„å€¼éƒ½ä¸æ˜¯ JSON-safe çš„ã€‚ä¾‹å¦‚ <code>undefined</code> <code>function</code> <code>symbol</code> è¿˜æœ‰å¾ªç¯å¼•ç”¨çš„ <code>object</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éJSON-safeçš„å€¼ä¼šè¢«ç•¥æ‰</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">undefined</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„å†…éJSON-safeçš„å€¼ä¼šè¢«æ›¿æ¢ä¸ºnull</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify([<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">"a"</span>]); <span class="comment">// "[1,null,"a"]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å†…éJSON-safeçš„å€¼ä¼šè¢«æ’é™¤æ‰</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">"Allen"</span>, <span class="attr">age</span>: <span class="literal">undefined</span> &#125;); <span class="comment">// "&#123;"name":"Allen"&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">name</span>: <span class="string">"outer"</span> &#125;;</span><br><span class="line">a.b = &#123; <span class="attr">name</span>: <span class="string">"inner"</span>, <span class="attr">outer</span>: a &#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(a);</span><br></pre></td></tr></table></figure>
<h2 id="toJSON-æ–¹æ³•"><a href="#toJSON-æ–¹æ³•" class="headerlink" title="toJSON æ–¹æ³•"></a>toJSON æ–¹æ³•</h2><p>å½“å¯¹ä¸€ä¸ªå¯¹è±¡ç›´æ¥ stringify çš„ç»“æœä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ–è€…é‚£ä¸ªå¯¹è±¡å«å¾ªç¯å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯¥å¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ª<code>toJSON</code>æ–¹æ³•æ¥è‡ªå®šä¹‰å®ƒéœ€è¦è¿”å›çš„ç»“æœã€‚è¿”å›çš„ç»“æœå¾—æ˜¯ JSON-safe çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  b: <span class="number">42</span>,</span><br><span class="line">  c: o,</span><br><span class="line">  d: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a circular reference inside `a`</span></span><br><span class="line">o.e = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// would throw an error on the circular reference</span></span><br><span class="line"><span class="comment">// JSON.stringify( a );</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// define a custom JSON value serialization</span></span><br><span class="line">a.toJSON = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// only include the `b` property for serialization</span></span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">b</span>: <span class="keyword">this</span>.b &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(a); <span class="comment">// "&#123;"b":42&#125;"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o); <span class="comment">// "&#123;"e":&#123;"b":42&#125;&#125;"</span></span><br></pre></td></tr></table></figure>
<h3 id="stringify-çš„ç¬¬äºŒä¸ªå‚æ•°-replacer"><a href="#stringify-çš„ç¬¬äºŒä¸ªå‚æ•°-replacer" class="headerlink" title="stringify çš„ç¬¬äºŒä¸ªå‚æ•° replacer"></a>stringify çš„ç¬¬äºŒä¸ªå‚æ•° replacer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  b: <span class="number">42</span>,</span><br><span class="line">  c: <span class="string">"42"</span>,</span><br><span class="line">  d: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(a, [<span class="string">"b"</span>, <span class="string">"c"</span>]); <span class="comment">// "&#123;"b":42,"c":"42"&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(a, <span class="function"><span class="keyword">function</span>(<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (k !== <span class="string">"c"</span>) <span class="keyword">return</span> v;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// "&#123;"b":42,"d":[1,2,3]&#125;"</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æœåœ¨ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œé‚£ä¹ˆ stringify çš„è¿‡ç¨‹ä¸­å°±ä¼šåªä¿ç•™å¯¹åº”çš„é”®å€¼å¯¹ã€‚</p>
<p>å¦‚æœåœ¨ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå®šä¹‰éœ€è¦ä¿ç•™çš„é”®å€¼å¯¹ã€‚</p>
<h3 id="stringify-çš„ç¬¬ä¸‰ä¸ªå‚æ•°-space"><a href="#stringify-çš„ç¬¬ä¸‰ä¸ªå‚æ•°-space" class="headerlink" title="stringify çš„ç¬¬ä¸‰ä¸ªå‚æ•° space"></a>stringify çš„ç¬¬ä¸‰ä¸ªå‚æ•° space</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  b: <span class="number">42</span>,</span><br><span class="line">  c: <span class="string">"42"</span>,</span><br><span class="line">  d: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(a, <span class="literal">null</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// "&#123;</span></span><br><span class="line"><span class="comment">//    "b": 42,</span></span><br><span class="line"><span class="comment">//    "c": "42",</span></span><br><span class="line"><span class="comment">//    "d": [</span></span><br><span class="line"><span class="comment">//       1,</span></span><br><span class="line"><span class="comment">//       2,</span></span><br><span class="line"><span class="comment">//       3</span></span><br><span class="line"><span class="comment">//    ]</span></span><br><span class="line"><span class="comment">// &#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(a, <span class="literal">null</span>, <span class="string">"-----"</span>);</span><br><span class="line"><span class="comment">// "&#123;</span></span><br><span class="line"><span class="comment">// -----"b": 42,</span></span><br><span class="line"><span class="comment">// -----"c": "42",</span></span><br><span class="line"><span class="comment">// -----"d": [</span></span><br><span class="line"><span class="comment">// ----------1,</span></span><br><span class="line"><span class="comment">// ----------2,</span></span><br><span class="line"><span class="comment">// ----------3</span></span><br><span class="line"><span class="comment">// -----]</span></span><br><span class="line"><span class="comment">// &#125;"</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯æ•°å­—ï¼Œè¡¨ç¤ºç¼©è¿›çš„ç©ºæ ¼ä¸ªæ•°ï¼›ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå ä½çš„ç¬¦å·ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="åšä¸»">
            
              <p class="site-author-name" itemprop="name">åšä¸»</p>
              <p class="site-description motion-element" itemprop="description">è®°å½•å­¦ä¹ çš„è¿‡ç¨‹</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Allen Bai</span>

  

  
</div>


  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.0"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>



  



  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
